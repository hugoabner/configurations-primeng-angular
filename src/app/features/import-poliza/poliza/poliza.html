<main class="p-4 h-full">
  <!-- Contenedor con borde bonito, sombra y redondeado -->
  <div
    class="border border-surface-200 dark:border-surface-800 
    shadow-sm bg-surface-0 dark:bg-surface-900 "
  >
    <p-table
      #dt2
      [resizableColumns]="true"
      columnResizeMode="expand"
      [showGridlines]="true"
      [value]="customers"
      dataKey="id"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25, 50]"
      [loading]="loading"
      [paginator]="true"
      [globalFilterFields]="[
        'renovacion_id',
        'tipo_documento',
        'numero_documento',
        'nombre_aseguradora',
      ]"
      [tableStyle]="{ 'min-width': '75rem' }"
    >
      <!-- Caption -->
      <ng-template #caption>
        <div class="flex">
          <p-iconfield iconPosition="left" class="ml-auto">
            <p-inputicon>
              <i class="pi pi-search"></i>
            </p-inputicon>
            <input
              pInputText
              type="text"
              (input)="dt2.filterGlobal($event.target.value, 'contains')"
              placeholder="Search keyword"
            />
          </p-iconfield>
        </div>
      </ng-template>
      <!-- Header -->
      <ng-template #header>
        <tr>
          @for (item of COLUMNS_POLIZA_TABLE; track $index) {
            <th pResizableColumn style="width: 4%" [id]="item.key">{{ item.label }}</th>
          }
          <!-- <th style="width: 22%">Country</th> -->
          <!-- <th style="width: 22%">Agent</th> -->
          <!-- <th style="width: 22%">Status</th> -->
          <!-- <th style="width: 12%">Verified</th> -->
        </tr>
        <tr>
          <th>
            <p-columnFilter
              class="z-0"
              type="text"
              field="renovacion_id"
              placeholder="Type to search"
              ariaLabel="Filter Name"
              filterOn="input"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="tipo_documento"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="numero_documento"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="nombre_completo"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="telefono"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="correo_electronico"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="usuario_cotizacion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="uso_descripcion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="clase_descripcion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="marca_descripcion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="modelo_descripcion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="version"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="codigo_modelo_cia"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="descripcion_modelo_cia"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="anio_vehiculo"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="suma_asegurada"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="numero_cotizacion_aseguradora"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="prima_total"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="prima_mensual_con_descuento"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="prima_total_real"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="prima_mensual"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="nombre_aseguradora"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="agrupador_descripcion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="agrupador_orden"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="agrupador_resenia"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="numero_anios_vigencia_poliza"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="descripcion_tipo_cobertura"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="producto_descripcion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="tasa"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="prima_por_descuento"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="agrupador_id"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="requiere_gps"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="descripcion_tipo_inspeccion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="url_cotizacion"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <th>
            <p-columnFilter
              type="text"
              field="resultado_estado"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th>
          <!-- <th>
            <p-columnFilter
              type="text"
              field="resultado_mensaje"
              placeholder="Enter key to search"
              ariaLabel="Filter Country"
            ></p-columnFilter>
          </th> -->
          <th>
            <p-columnFilter field="representative" matchMode="in" [showMenu]="false">
              <ng-template #filter let-value let-filter="filterCallback">
                <p-multiselect
                  [ngModel]="value"
                  [options]="representatives"
                  placeholder="Any"
                  (onChange)="filter($event.value)"
                  optionLabel="name"
                  [appendTo]="'body'"
                  style="min-width: 14rem"
                  [panelStyle]="{ minWidth: '16rem' }"
                >
                  <ng-template let-option #item>
                    <div class="flex items-center gap-2">
                      <img
                        [alt]="option.label"
                        src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{
                          option.image
                        }}"
                        style="width: 32px"
                      />
                      <span>{{ option.name }}</span>
                    </div>
                  </ng-template>
                </p-multiselect>
              </ng-template>
            </p-columnFilter>
          </th>
          <!-- <th>
            <p-columnFilter field="representative" matchMode="in" [showMenu]="false">
              <ng-template #filter let-value let-filter="filterCallback">
                <p-multiselect
                  [ngModel]="value"
                  [options]="representatives"
                  placeholder="Any"
                  (onChange)="filter($event.value)"
                  optionLabel="name"
                  style="min-width: 14rem"
                  [panelStyle]="{ minWidth: '16rem' }"
                >
                  <ng-template let-option #item>
                    <div class="flex items-center gap-2">
                      <img
                        [alt]="option.label"
                        src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{
                          option.image
                        }}"
                        style="width: 32px"
                      />
                      <span>{{ option.name }}</span>
                    </div>
                  </ng-template>
                </p-multiselect>
              </ng-template>
            </p-columnFilter>
          </th>
          <th>
            <p-columnFilter field="status" matchMode="equals" [showMenu]="false">
              <ng-template #filter let-value let-filter="filterCallback">
                <p-select
                  [ngModel]="value"
                  [options]="statuses"
                  (onChange)="filter($event.value)"
                  placeholder="Select One"
                  [showClear]="true"
                  style="min-width: 12rem"
                >
                  <ng-template let-option #item>
                    <p-tag [value]="option.value" [severity]="getSeverity(option.value)" />
                  </ng-template>
                </p-select>
              </ng-template>
            </p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="boolean" field="verified"></p-columnFilter>
          </th> -->
        </tr>
      </ng-template>
      <!-- Body -->
      <ng-template #body let-customer>
        <tr>
          <td>
            {{ customer.renovacion_id }}
          </td>
          <td>
            {{ customer.tipo_documento }}
          </td>
          <td>
            {{ customer.numero_documento }}
          </td>
          <td>
            {{ customer.nombre_completo }}
          </td>
          <td>
            {{ customer.telefono }}
          </td>
          <td>
            {{ customer.correo_electronico }}
          </td>
          <td>
            {{ customer.usuario_cotizacion }}
          </td>
          <td>
            {{ customer.uso_descripcion }}
          </td>
          <td>
            {{ customer.clase_descripcion }}
          </td>
          <td>
            {{ customer.marca_descripcion }}
          </td>
          <td>
            {{ customer.modelo_descripcion }}
          </td>
          <td>
            {{ customer.version }}
          </td>
          <td>
            {{ customer.codigo_modelo_cia }}
          </td>
          <td>
            {{ customer.descripcion_modelo_cia }}
          </td>
          <td>
            {{ customer.anio_vehiculo }}
          </td>
          <td>
            {{ customer.suma_asegurada }}
          </td>
          <td>
            {{ customer.numero_cotizacion_aseguradora }}
          </td>
          <td>
            {{ customer.prima_total }}
          </td>
          <td>
            {{ customer.prima_mensual_con_descuento }}
          </td>
          <td>
            {{ customer.prima_total_real }}
          </td>
          <td>
            {{ customer.prima_mensual }}
          </td>
          <td>
            {{ customer.nombre_aseguradora }}
          </td>
          <td>
            {{ customer.agrupador_descripcion }}
          </td>
          <td>
            {{ customer.agrupador_orden }}
          </td>
          <td>
            {{ customer.agrupador_resenia }}
          </td>
          <td>
            {{ customer.numero_anios_vigencia_poliza }}
          </td>
          <td>
            {{ customer.descripcion_tipo_cobertura }}
          </td>
          <td>
            {{ customer.producto_descripcion }}
          </td>
          <td>
            {{ customer.tasa }}
          </td>
          <td>
            {{ customer.prima_por_descuento }}
          </td>
          <td>
            {{ customer.agrupador_id }}
          </td>
          <td>
            {{ customer.requiere_gps }}
          </td>
          <td>
            {{ customer.descripcion_tipo_inspeccion }}
          </td>
          <td>
            {{ customer.url_cotizacion }}
          </td>
          <td>
            {{ customer.resultado_estado }}
          </td>
          <td>
            {{ customer.resultado_mensaje }}
          </td>

          <!-- <td>
            <div class="flex items-center gap-2">
              <img
                src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                [class]="'flag flag-' + customer.country.code"
                style="width: 20px"
              />
              <span>{{ customer.country.name }}</span>
            </div>
          </td>
          <td>
            <div class="flex items-center gap-2">
              <img
                [alt]="customer.representative.name"
                src="https://primefaces.org/cdn/primeng/images/demo/avatar/{{
                  customer.representative.image
                }}"
                width="32"
                style="vertical-align: middle"
              />
              <span>{{ customer.representative.name }}</span>
            </div>
          </td>
          <td>
            <p-tag [value]="customer.status" [severity]="getSeverity(customer.status)" />
          </td>
          <td>
            <i
              class="pi"
              [ngClass]="{
                'text-green-500 pi-check-circle': customer.verified,
                'text-red-500 pi-times-circle': !customer.verified,
              }"
            ></i>
          </td> -->
        </tr>
      </ng-template>
      <!-- Empty Message -->
      <ng-template #emptymessage>
        <tr>
          <td colspan="5">No customers found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</main>
